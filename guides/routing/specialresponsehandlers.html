<html lang="en">

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-73924704-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-73924704-2', { 'anonymize_ip': true });
</script>
  <title>Learn - Response Handlers</title>
  <link rel="icon" type="image/png" href="../../assets/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="../../assets/favicon-16x16.png" sizes="16x16" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="../../scripts/prism.js"></script>
  <link rel="stylesheet" href="../../css/reset.css">
  <link rel="stylesheet" href="../../css/main.css">
  <link rel="stylesheet" href="../../css/guides.css">
  <link rel="stylesheet" media="screen and (max-width: 900px)" href="../../css/mobile_guides.css">
</head>

<header>
  <div class="header-container">
    <div class="header-main">
      <a class="home-link" href="../../index.html">
        <img class="header-logo" src="../../assets/kitura-logo.png" alt="Kitura logo">
        <h1 class="header-title">KITURA</h1>
      </a>
    </div>
    <nav class="header-nav">
      <a class="header-link active-nav" href="../../learn.html">LEARN</a>
      <a class="header-link" href="../../packages.html">PACKAGES</a>
      <a class="header-link" href="../../events.html">EVENTS</a>
      <a class="header-link" href="../../help.html">HELP</a>
    </nav>
  </div>
</header>
<body>
  <section class="guide-content">

                                <div class="speech-bubble2">
                                    Let's talk about response handlers and multi-handlers, and what they are.
                                </div>

    <p>Responses can accept multiple handlers allowing logic to be broken up into sections.</p>
    <pre><code class="language-swift">router.get("foo", handler: { request, response, next in
    if request.queryParameters["bar"] == nil {
        response.error = NSError(domain: "RouterTestDomain", code: 1, userInfo: [:])
    }
    next()
}, { request, response, next in
    // Only gets called if no error
})</code></pre>
                                    <div class="speech-bubble">
                                        Let's get familiar with multi-HTTP verbs.
                                    </div>

    <p>Multiple HTTP verbs can be specified for one path using the route method.</p>
    <pre><code class="language-swift">router.route("foo")
.get() { request, response, next in
    // Get logic here
}
.post() { request, response, next in
    // Post logic here
}</code></pre>
                                        <div class="speech-bubble">
                                            Let's get familiar with sub-routers.
                                        </div>
    <p>A large router can be broken up into sub-routers and be mounted under a path prefix. These sub-routers can even be placed in separate files.</p>

                    <div class="speech-bubble4" onclick="window.open('http://slack.kitura.io/')">
                      I need some help. Can I message you on Slack?
                    </div>
                    <pre><code class="language-swift">let subrouter = Router()
subrouter.get("/") { _, response, _ in
    try response.send("Hello from subsection").end()
}

subrouter.get("/about") {_, response, _ in
    try response.send("About the subsection").end()
}

let mainRouter = Router()
mainRouter.get("/") {_, response, _ in
    try response.send("Welcome").end()
}
mainRouter.all("sub", middleware: subrouter)

// Add HTTP Server to listen on port 8080
Kitura.addHTTPServer(onPort: 8080, with: mainRouter)

// start the framework - the servers added until now will start listening
Kitura.run()</code></pre>
    <p>A GET request to localhost:8080 will return “Welcome” and a request to localhost:8080/sub will return “Hello from subsection”</p>
  </section>
</body>
<footer>

  <nav class="footer-nav">
    <a class="footer-link" href="https://forums.swift.org/c/related-projects/kitura">FORUMS</a>
    <a class="footer-link" href="https://developer.ibm.com/swift/blogs/">BLOGS</a>
  </nav>
</footer>
</html>
